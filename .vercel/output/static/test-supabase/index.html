<!DOCTYPE html><html lang="es"> <head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Supabase Test</title><meta name="description" content="Test Supabase connection"><link rel="canonical" href="http://localhost:4321/test-supabase/"><script type="module">(function(){const n="theme",e=document.documentElement;function o(t){e.classList.toggle("dark",t==="dark"),e.dataset.theme=t}function a(){const t=localStorage.getItem(n);return t==="light"||t==="dark"?t:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}o(a()),window.__toggleTheme=function(){const t=e.classList.contains("dark")?"light":"dark";localStorage.setItem(n,t),o(t)},document.addEventListener("click",t=>{t.target.closest("[data-theme-toggle]")&&window.__toggleTheme()})})();</script><link rel="stylesheet" href="/_astro/admin.Bo_B2D9L.css"></head> <body class="min-h-screen"> <main class="min-h-[70vh]">  <section class="mx-auto max-w-4xl px-4 py-12"> <h1 class="text-3xl font-semibold tracking-tight">Supabase Connection Test</h1> <div class="mt-8 space-y-4"> <div class="card p-4"> <h2 class="font-semibold mb-2">Environment Variables</h2> <p class="text-sm">PUBLIC_SUPABASE_URL: https://zyhtpgfjkvxobmgldxzz.supabase.co</p> <p class="text-sm">PUBLIC_SUPABASE_ANON_KEY: Set</p> </div> <div class="card p-4"> <h2 class="font-semibold mb-2">Test Actions</h2> <div class="space-x-2"> <button id="testConnection" class="btn-primary">Test Connection</button> <button id="testGoogleLogin" class="btn-primary">Test Google Login</button> <button id="checkSession" class="btn-secondary">Check Session</button> </div> </div> <div id="results" class="card p-4"> <h2 class="font-semibold mb-2">Results</h2> <pre id="output" class="text-xs bg-gray-100 dark:bg-gray-800 p-2 rounded overflow-auto max-h-64"></pre> </div> </div> </section> <script type="module">
    import { createClient } from '@supabase/supabase-js';
    
    const SUPABASE_URL = import.meta.env.PUBLIC_SUPABASE_URL;
    const SUPABASE_ANON = import.meta.env.PUBLIC_SUPABASE_ANON_KEY;
    
    const output = document.getElementById('output');
    const results = document.getElementById('results');
    
    function log(message) {
      console.log(message);
      output.textContent += new Date().toLocaleTimeString() + ': ' + JSON.stringify(message, null, 2) + '\n\n';
    }
    
    function clearOutput() {
      output.textContent = '';
    }
    
    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON);
    
    log('Supabase client created');
    log('URL: ' + SUPABASE_URL);
    log('Anon Key: ' + (SUPABASE_ANON ? 'Set' : 'Not set'));
    
    document.getElementById('testConnection').onclick = async () => {
      clearOutput();
      log('Testing connection...');
      
      try {
        const { data, error } = await supabase.from('blog_posts').select('count');
        if (error) {
          log('Connection error: ' + error.message);
        } else {
          log('Connection successful!');
          log('Data: ' + JSON.stringify(data));
        }
      } catch (err) {
        log('Connection failed: ' + String(err));
      }
    };
    
    document.getElementById('testGoogleLogin').onclick = async () => {
      clearOutput();
      log('Testing Google login...');
      
      try {
        const { data, error } = await supabase.auth.signInWithOAuth({
          provider: 'google',
          options: { 
            redirectTo: window.location.origin + '/admin'
          }
        });
        
        log('OAuth initiated');
        log('Data: ' + JSON.stringify(data));
        if (error) log('Error: ' + error.message);
      } catch (err) {
        log('Login failed: ' + String(err));
      }
    };
    
    document.getElementById('checkSession').onclick = async () => {
      clearOutput();
      log('Checking session...');
      
      try {
        const { data: { session }, error } = await supabase.auth.getSession();
        
        if (error) {
          log('Session error: ' + error.message);
        } else if (session) {
          log('Session found!');
          log('User: ' + JSON.stringify(session.user, null, 2));
        } else {
          log('No active session');
        }
      } catch (err) {
        log('Session check failed: ' + String(err));
      }
    };
    
    // Check current session on load
    (async () => {
      const { data: { session } } = await supabase.auth.getSession();
      if (session) {
        log('Current session found');
        log('User email: ' + session.user.email);
      } else {
        log('No current session');
      }
    })();
  </script>  </main> <footer class="border-t" style="border-color: rgb(var(--border));"> <div class="mx-auto max-w-6xl px-4 py-8 text-sm" style="color: rgb(var(--muted));"> <div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"> <p>Â© 2026 bvislaoch</p> <div class="flex gap-4"> <a class="underline underline-offset-4 hover:opacity-100" href="mailto:bvislao95@gmail.com">Email</a> <a class="underline underline-offset-4 hover:opacity-100" href="https://www.linkedin.com/in/bvislaochavez/" target="_blank" rel="noreferrer noopener">LinkedIn</a> <a class="underline underline-offset-4 hover:opacity-100" href="https://github.com/bvislao" target="_blank" rel="noreferrer noopener">GitHub</a> </div> </div> </div> </footer> </body></html>